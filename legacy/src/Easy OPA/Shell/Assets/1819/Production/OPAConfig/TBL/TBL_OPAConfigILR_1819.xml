<OPAMapping xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:noNamespaceSchemaLocation="OPAMapping.xsd"
            RulebasePath="${WorkingFolder}\Rulebases\TBL\Trailblazer Funding Calc 18_19.zip"
            BatchSize="1"
            NumberOfThreads="-1">
    <OPACaseControl DBConnectionID="ILR">
        <CaseStatus StoredProcName="Rulebase.TBL_Update_Cases"
                    CaseFailure="40"
                    CaseSuccess="30"
                    ProcessCase="10" />
        <DBQuery>
            <StoredProcName>Rulebase.TBL_Get_Cases</StoredProcName>
        </DBQuery>
    </OPACaseControl>
    <OPAResults>
        <OPAResult StoredProcName="Rulebase.TBL_Insert_global"
                   TopLevelEntityName="global"
                   DBConnectionID="ILR"
                   RunOnce="y">
            <ResultQueryParameterMap AttributeName="UKPRN"
                                     ParameterName="UKPRN"
                                     EntityName="global" />
            <ResultQueryParameterMap AttributeName="CurFundYr"
                                     ParameterName="CurFundYr"
                                     EntityName="global" />
            <ResultQueryParameterMap AttributeName="LARSVersion"
                                     ParameterName="LARSVersion"
                                     EntityName="global" />
            <ResultQueryParameterMap AttributeName="RulebaseVersion"
                                     ParameterName="RulebaseVersion"
                                     EntityName="global" />
        </OPAResult>
        <OPAResult StoredProcName="Rulebase.TBL_Insert_LearningDelivery"
                   TopLevelEntityName="LearningDelivery"
                   DBConnectionID="ILR">
            <ResultQueryParameterMap AttributeName="LearnRefNumber"
                                     ParameterName="LearnRefNumber"
                                     EntityName="Learner"/>
            <ResultQueryParameterMap AttributeName="AimSeqNumber"
                                     ParameterName="AimSeqNumber"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="ProgStandardStartDate"
                                     ParameterName="ProgStandardStartDate"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="FundLine"
                                     ParameterName="FundLine"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="MathEngAimValue"
                                     ParameterName="MathEngAimValue"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="PlannedNumOnProgInstalm"
                                     ParameterName="PlannedNumOnProgInstalm"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="LearnSuppFundCash"
                                     ParameterName="LearnSuppFundCash"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="LearnSuppFundCash"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="AdjProgStartDate"
                                     ParameterName="AdjProgStartDate"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="LearnSuppFund"
                                     ParameterName="LearnSuppFund"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="LearnSuppFund"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="MathEngOnProgPayment"
                                     ParameterName="MathEngOnProgPayment"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="MathEngOnProgPayment"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="InstPerPeriod"
                                     ParameterName="InstPerPeriod"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="InstPerPeriod"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="SmallBusPayment"
                                     ParameterName="SmallBusPayment"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="SmallBusPayment"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="YoungAppSecondPayment"
                                     ParameterName="YoungAppSecondPayment"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="YoungAppSecondPayment"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="CoreGovContPayment"
                                     ParameterName="CoreGovContPayment"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="CoreGovContPayment"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="YoungAppEligible"
                                     ParameterName="YoungAppEligible"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="SmallBusEligible"
                                     ParameterName="SmallBusEligible"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="MathEngOnProgPct"
                                     ParameterName="MathEngOnProgPct"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="MathEngOnProgPct"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="AgeStandardStart"
                                     ParameterName="AgeStandardStart"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="YoungAppSecondThresholdDate"
                                     ParameterName="YoungAppSecondThresholdDate"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="EmpIdFirstDayStandard"
                                     ParameterName="EmpIdFirstDayStandard"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="EmpIdFirstYoungAppDate"
                                     ParameterName="EmpIdFirstYoungAppDate"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="EmpIdSecondYoungAppDate"
                                     ParameterName="EmpIdSecondYoungAppDate"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="EmpIdSmallBusDate"
                                     ParameterName="EmpIdSmallBusDate"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="YoungAppFirstThresholdDate"
                                     ParameterName="YoungAppFirstThresholdDate"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="AchApplicDate"
                                     ParameterName="AchApplicDate"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="AchEligible"
                                     ParameterName="AchEligible"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="Achieved"
                                     ParameterName="Achieved"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="AchievementApplicVal"
                                     ParameterName="AchievementApplicVal"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="AchPayment"
                                     ParameterName="AchPayment"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="AchPayment"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="ActualNumInstalm"
                                     ParameterName="ActualNumInstalm"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="CombinedAdjProp"
                                     ParameterName="CombinedAdjProp"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="EmpIdAchDate"
                                     ParameterName="EmpIdAchDate"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="LearnDelDaysIL"
                                     ParameterName="LearnDelDaysIL"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="LearnDelStandardAccDaysIL"
                                     ParameterName="LearnDelStandardAccDaysIL"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="LearnDelStandardPrevAccDaysIL"
                                     ParameterName="LearnDelStandardPrevAccDaysIL"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="LearnDelStandardTotalDaysIL"
                                     ParameterName="LearnDelStandardTotalDaysIL"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="ActualDaysIL"
                                     ParameterName="ActualDaysIL"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="MathEngBalPayment"
                                     ParameterName="MathEngBalPayment"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="MathEngBalPayment"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="MathEngBalPct"
                                     ParameterName="MathEngBalPct"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="MathEngBalPct"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="MathEngLSFFundStart"
                                     ParameterName="MathEngLSFFundStart"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="PlannedTotalDaysIL"
                                     ParameterName="PlannedTotalDaysIL"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="MathEngLSFThresholdDays"
                                     ParameterName="MathEngLSFThresholdDays"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="OutstandNumOnProgInstalm"
                                     ParameterName="OutstandNumOnProgInstalm"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="SmallBusApplicVal"
                                     ParameterName="SmallBusApplicVal"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="SmallBusStatusFirstDayStandard"
                                     ParameterName="SmallBusStatusFirstDayStandard"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="SmallBusStatusThreshold"
                                     ParameterName="SmallBusStatusThreshold"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="YoungAppApplicVal"
                                     ParameterName="YoungAppApplicVal"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="CoreGovContCapApplicVal"
                                     ParameterName="CoreGovContCapApplicVal"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="CoreGovContUncapped"
                                     ParameterName="CoreGovContUncapped"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="CoreGovContUncapped"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="ApplicFundValDate"
                                     ParameterName="ApplicFundValDate"
                                     EntityName="LearningDelivery"/>
            <ResultQueryParameterMap AttributeName="YoungAppFirstPayment"
                                     ParameterName="YoungAppFirstPayment"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="YoungAppFirstPayment"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
            <ResultQueryParameterMap AttributeName="YoungAppPayment"
                                     ParameterName="YoungAppPayment"
                                     EntityName="LearningDelivery">
                <ChangePoint ParentAttributeIDColumn="YoungAppPayment"
                             StoredProcName="Rulebase.TBL_Insert_LearningDelivery_PeriodisedValues">
                    <ChangePointParameterMap AttributeName="AttributeName"
                                             ParemeterName="AttributeName" />
                    <ChangePointParameterMap EntityName="Learner"
                                             AttributeName="LearnRefNumber"
                                             ParemeterName="LearnRefNumber" />
                    <ChangePointParameterMap AttributeName="AimSeqNumber"
                                             ParemeterName="AimSeqNumber" />
                    <Period SP_ParameterPrefix="Period_"
                            NumOfPeriods="12"
                            PeriodStartDate="${PeriodStartDate}" />
                </ChangePoint>
            </ResultQueryParameterMap>
        </OPAResult>
    </OPAResults>
</OPAMapping>